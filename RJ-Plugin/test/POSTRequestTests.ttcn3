module POSTRequestTests {
	import from Lib_HTTP all;
	import from UnitFramework all;

	type record POSTFindByStatus {
		record of integer id optional,
		Pet pet
	}
	with {
		encode "REST/post";
		variant "path: /pet/findByStatus";
		encode (id) "query";
		encode (pet) "body/json";
	}


	type record Pet {
		string name, 
		string _type,
		record of string aspects
	} with {
		variant (_type) "type"
	}
	
	
	template Pet firstPet := {
		"the Pet 1",
		"dog",
		{"brown hair", "4 legs"}
	}
	
	testcase OneQuery() runs on RESTComponent system TSRestService {
		setUp(system);
		service.send(POSTFindByStatus:{
			{2246},
			firstPet
		});
		service.receive;
	}
	
}